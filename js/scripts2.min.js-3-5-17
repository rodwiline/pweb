function updateNav(){var e=mr_scrollTop;if(0>=e)return mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight")),void(mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled")));if(e>mr_navOuterHeight+mr_fixedAt){if(!mr_navScrolled)return mr_nav.addClass("scrolled"),void(mr_navScrolled=!0)}else e>mr_navOuterHeight?(mr_navFixed||(mr_nav.addClass("fixed"),mr_navFixed=!0),e>mr_navOuterHeight+10?mr_outOfSight||(mr_nav.addClass("outOfSight"),mr_outOfSight=!0):mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))):(mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))),mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled"))}function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function initializeMasonry(){$(".masonry").each(function(){var e=$(this).get(0),t=new Masonry(e,{itemSelector:".masonry-item"});t.on("layoutComplete",function(){mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0),$(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1)),$(".masonry").addClass("fadeIn"),$(".masonry-loader").addClass("fadeOut"),$(".masonryFlyIn").length&&masonryFlyIn()}),t.layout()})}function masonryFlyIn(){var e=$(".masonryFlyIn .masonry-item"),t=0;e.each(function(){var e=$(this);setTimeout(function(){e.addClass("fadeIn")},t),t+=170})}function setupFloatingProjectFilters(){mr_floatingProjectSections=[],$(".filters.floating").closest("section").each(function(){var e=$(this);mr_floatingProjectSections.push({section:e.get(0),outerHeight:e.outerHeight(),elemTop:e.offset().top,elemBottom:e.offset().top+e.outerHeight(),filters:e.find(".filters.floating"),filersHeight:e.find(".filters.floating").outerHeight(!0)})})}function updateFloatingFilters(){for(var e=mr_floatingProjectSections.length;e--;){var t=mr_floatingProjectSections[e];t.elemTop<mr_scrollTop&&"undefined"==typeof window.mr_variant?(t.filters.css({position:"fixed",top:"16px",bottom:"auto"}),mr_navScrolled&&t.filters.css({transform:"translate3d(-50%,48px,0)"}),mr_scrollTop>t.elemBottom-70&&(t.filters.css({position:"absolute",bottom:"16px",top:"auto"}),t.filters.css({transform:"translate3d(-50%,0,0)"}))):t.filters.css({position:"absolute",transform:"translate3d(-50%,0,0)"})}}function prepareSignup(e){var t,a=jQuery("<form />"),n=jQuery("<div />");return jQuery(n).html(e.attr("srcdoc")),t=jQuery(n).find("form").attr("action"),/list-manage\.com/.test(t)&&(t=t.replace("/post?","/post-json?")+"&c=?","//"==t.substr(0,2)&&(t="http:"+t)),/createsend\.com/.test(t)&&(t+="?callback=?"),a.attr("action",t),jQuery(n).find("input, select, textarea").not('input[type="submit"]').each(function(){jQuery(this).clone().appendTo(a)}),a}function mr_parallax(){"use strict";function e(e){for(var t=0;t<e.length;t++)if("undefined"!=typeof document.body.style[e[t]])return e[t];return null}function t(){var e,t=0;return d()?(t=jQuery(".viu").find("nav:first").outerHeight(!0),e=jQuery(".viu").find("nav:first").css("position"),("absolute"===e||"fixed"===e)&&(t=0)):t=jQuery(document).find("nav:first").outerHeight(!0),t}function a(e,t,a,n){var i=e-1;return i/=n,e/=n,i--,e--,a*(e*e*e*e*e+1)+t-(a*(i*i*i*i*i+1)+t)}function n(){if(I){for(var e=c.length,t=o();e--;)i(c[e],t,v,p);I=!1}y&&(A+=-x*a(b,0,_,j),(A>N||-N>A)&&(P.scrollBy(0,A),A=0),b++,b>j&&(b=0,y=!1,w=!0,x=0,C=0,S=0,A=0)),u(n)}function i(e,t,a,n){var i=d();i?t+h-g>e.elemTop&&t-g<e.elemBottom&&(e.isFirstSection?e.imageHolder.style[f]=a+t/2+n:e.imageHolder.style[f]=a+(t-e.elemTop-g)/2+n):t+h>e.elemTop&&t<e.elemBottom&&(e.isFirstSection?e.imageHolder.style[f]=a+t/2+n:e.imageHolder.style[f]=a+(t+h-e.elemTop)/2+n)}function o(){return P!=window?P.scrollTop:0===document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop}function r(){I=!0}function s(e){M.mr_scrollAssist===!0&&(e.preventDefault&&e.preventDefault(),x=e.notRealWheel?-e.deltaY/4:1==e.deltaMode?-e.deltaY/3:100===Math.abs(e.deltaY)?-e.deltaY/120:-e.deltaY/40,x=-T>x?-T:x,x=x>T?T:x,y=!0,b=k)}function l(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function d(){return"undefined"==typeof window.mr_variant?!1:!0}var c,u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,m=["transform","msTransform","webkitTransform","mozTransform","oTransform"],f=e(m),v="translate3d(0,",p="px,0)",h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=0,y=!1,w=!0,b=0,x=0,C=0,S=0,T=2,k=4,_=300,N=1,j=30,A=0,P=window,I=(d(),!1),M=this;this.mr_scrollAssist=$("body").hasClass("scroll-assist")?!0:!1,jQuery(document).ready(function(){M.documentReady()}),jQuery(window).load(function(){M.windowLoad()}),this.getScrollingState=function(){return b>0?!0:!1},this.documentReady=function(e){return h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),jQuery("body").hasClass("parallax-2d")&&(v="translate(0,",p="px)"),/Android|iPad|iPhone|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)?jQuery(".parallax").removeClass("parallax"):u&&(M.profileParallaxElements(),M.setupParallax()),l(e)?void e():void 0},this.windowLoad=function(){h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=t(),window.mr_parallax.profileParallaxElements()},this.setupParallax=function(){d()&&(P=jQuery(".viu").get(0),"undefined"!=typeof P&&(P.scrollBy=function(e,t){this.scrollTop+=t,this.scrollLeft+=e})),"undefined"!=typeof P&&(P.addEventListener("scroll",r,!1),window.addWheelListener(P,s,!1),window.addEventListener("resize",function(){h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=t(),M.profileParallaxElements()},!1),n())},this.profileParallaxElements=function(){c=[],g=t();var e=d(),a=".parallax > .background-image-holder, .parallax ul.slides > li > .background-image-holder";e&&(a=".viu .parallax > .background-image-holder, .viu .parallax ul.slides > li > .background-image-holder"),jQuery(a).each(function(t){var a=jQuery(this).closest(".parallax"),n=e?a.position().top:a.offset().top;c.push({section:a.get(0),outerHeight:a.outerHeight(),elemTop:n,elemBottom:n+a.outerHeight(),isFirstSection:a.is(":nth-of-type(1)")?!0:!1,imageHolder:jQuery(this).get(0)}),e?e&&(a.is(":nth-of-type(1)")?M.mr_setTranslate3DTransform(jQuery(this).get(0),0===o()?0:o()/2):M.mr_setTranslate3DTransform(jQuery(this).get(0),(o()-n-g)/2)):a.is(":nth-of-type(1)")?M.mr_setTranslate3DTransform(jQuery(this).get(0),0===o()?0:o()/2):M.mr_setTranslate3DTransform(jQuery(this).get(0),(o()+h-n)/2)})},this.mr_setTranslate3DTransform=function(e,t){e.style[f]=v+t+p}}var mr_firstSectionHeight,mr_nav,mr_fixedAt,mr_navOuterHeight,mr_navScrolled=!1,mr_navFixed=!1,mr_outOfSight=!1,mr_floatingProjectSections,mr_scrollTop=0;$(document).ready(function(){"use strict";function e(e){var t,a;return $(e).find('.validate-required[type="checkbox"]').each(function(){$('[name="'+$(this).attr("name")+'"]:checked').length||(a=1,t=$(this).attr("name").replace("[]",""),e.find(".form-error").text("Please tick at least one "+t+" box."))}),$(e).find(".validate-required").each(function(){""===$(this).val()?($(this).addClass("field-error"),a=1):$(this).removeClass("field-error")}),$(e).find(".validate-email").each(function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$(this).removeClass("field-error"):($(this).addClass("field-error"),a=1)}),e.find(".field-error").length||e.find(".form-error").fadeOut(1e3),a}function t(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}if($(".inner-link").each(function(){var e=$(this).attr("href");"#"!==e.charAt(0)&&$(this).removeClass("inner-link")}),$(".inner-link").length&&$(".inner-link").smoothScroll({offset:-55,speed:800}),addEventListener("scroll",function(){mr_scrollTop=window.pageYOffset},!1),$(".background-image-holder").each(function(){var e=$(this).children("img").attr("src"),t=$(this).children("#imageHQ").attr("src");$(this).css("background",'url("'+e+'")'),$(this).children("img").hide(),$(this).css("background-position","initial"),$(window).on("load",function(){$(this).css("background",'url("'+t+'")'),$(this).children("img").hide(),$(this).css("background-position","initial"),$(".bg-LQ").addClass("hide"),$(".bg-HQ").removeClass("hide")})}),setTimeout(function(){$(".background-image-holder").each(function(){$(this).addClass("fadeIn")})},200),$('[data-toggle="tooltip"]').tooltip(),$("ul[data-bullet]").each(function(){var e=$(this).attr("data-bullet");$(this).find("li").prepend('<i class="'+e+'"></i>')}),$(".progress-bar").each(function(){$(this).css("width",$(this).attr("data-progress")+"%")}),$("nav").hasClass("fixed")||$("nav").hasClass("absolute")?$("body").addClass("nav-is-overlay"):($(".nav-container").css("min-height",$("nav").outerHeight(!0)),$(window).resize(function(){$(".nav-container").css("min-height",$("nav").outerHeight(!0))}),$(window).width()>768&&$(".parallax:nth-of-type(1) .background-image-holder").css("top",-$("nav").outerHeight(!0)),$(window).width()>768&&$("section.fullscreen:nth-of-type(1)").css("height",$(window).height()-$("nav").outerHeight(!0))),$("nav").hasClass("bg-dark")&&$(".nav-container").addClass("bg-dark"),mr_nav=$("body .nav-container nav:first"),mr_navOuterHeight=$("body .nav-container nav:first").outerHeight(),mr_fixedAt="undefined"!=typeof mr_nav.attr("data-fixed-at")?parseInt(mr_nav.attr("data-fixed-at").replace("px","")):parseInt($("section:nth-of-type(1)").outerHeight()),window.addEventListener("scroll",updateNav,!1),$(".menu > li > ul").each(function(){var e=$(this).offset(),t=e.left+$(this).outerWidth(!0);if(t>$(window).width()&&!$(this).hasClass("mega-menu"))$(this).addClass("make-right");else if(t>$(window).width()&&$(this).hasClass("mega-menu")){var a=$(window).width()-e.left,n=$(this).outerWidth(!0)-a;$(this).css("margin-left",-n)}}),$(".mobile-toggle").click(function(){$(".nav-bar").toggleClass("nav-open"),$(this).toggleClass("active")}),$(".menu li").click(function(e){e||(e=window.event),e.stopPropagation(),$(this).find("ul").length?$(this).toggleClass("toggle-sub"):$(this).parents(".toggle-sub").removeClass("toggle-sub")}),$(".menu li a").click(function(){$(this).hasClass("inner-link")&&$(this).closest(".nav-bar").removeClass("nav-open")}),$(".module.widget-handle").click(function(){$(this).toggleClass("toggle-widget-handle")}),$(".search-widget-handle .search-form input").click(function(e){e||(e=window.event),e.stopPropagation()}),$(".offscreen-toggle").length?$("body").addClass("has-offscreen-nav"):$("body").removeClass("has-offscreen-nav"),$(".offscreen-toggle").click(function(){$(".main-container").toggleClass("reveal-nav"),$("nav").toggleClass("reveal-nav"),$(".offscreen-container").toggleClass("reveal-nav")}),$(".main-container").click(function(){$(this).hasClass("reveal-nav")&&($(this).removeClass("reveal-nav"),$(".offscreen-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav"))}),$(".offscreen-container a").click(function(){$(".offscreen-container").removeClass("reveal-nav"),$(".main-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav")}),$(".projects").each(function(){var e="";$(this).find(".project").each(function(){var t=$(this).attr("data-filter").split(",");t.forEach(function(t){-1==e.indexOf(t)&&(e+='<li data-filter="'+t+'">'+capitaliseFirstLetter(t)+"</li>")}),$(this).closest(".projects").find("ul.filters").empty().append('<li data-filter="all" class="active">All</li>').append(e)})}),$(".filters li").click(function(){var e=$(this).attr("data-filter");$(this).closest(".filters").find("li").removeClass("active"),$(this).addClass("active"),$(this).closest(".projects").find(".project").each(function(){var t=$(this).attr("data-filter");-1==t.indexOf(e)?$(this).addClass("inactive"):$(this).removeClass("inactive")}),"all"==e&&$(this).closest(".projects").find(".project").removeClass("inactive")}),jQuery(".tweets-feed").each(function(e){jQuery(this).attr("id","tweets-"+e)}).each(function(e){function t(t){for(var a=t.length,n=0,i=document.getElementById("tweets-"+e),o='<ul class="slides">';a>n;)o+="<li>"+t[n]+"</li>",n++;return o+="</ul>",i.innerHTML=o,o}var a={id:jQuery("#tweets-"+e).attr("data-widget-id"),domId:"",maxTweets:jQuery("#tweets-"+e).attr("data-amount"),enableLinks:!0,showUser:!0,showTime:!0,dateFunction:"",showRetweet:!1,customCallback:t};twitterFetcher.fetch(a)}),$(".instafeed").length&&(jQuery.fn.spectragram.accessData={accessToken:"1406933036.fedaafa.feec3d50f5194ce5b705a1f11a107e0b",clientID:"fedaafacf224447e8aef74872d3820a1"},$(".instafeed").each(function(){var e=$(this).attr("data-user-name");$(this).children("ul").spectragram("getUserFeed",{query:e,max:12})})),$(".flickr-feed").length&&$(".flickr-feed").each(function(){var e=$(this).attr("data-user-id"),t=$(this).attr("data-album-id");$(this).flickrPhotoStream({id:e,setId:t,container:'<li class="masonry-item" />'}),setTimeout(function(){initializeMasonry(),window.dispatchEvent(new Event("resize"))},1e3)}),$(".slider-all-controls, .slider-paging-controls, .slider-arrow-controls, .slider-thumb-controls, .logo-carousel").length&&($(".slider-all-controls").flexslider({start:function(e){e.find(".slides li:first-child").find(".fs-vid-background video").length&&e.find(".slides li:first-child").find(".fs-vid-background video").get(0).play()},after:function(e){e.find(".fs-vid-background video").length&&(e.find("li:not(.flex-active-slide)").find(".fs-vid-background video").length&&e.find("li:not(.flex-active-slide)").find(".fs-vid-background video").get(0).pause(),e.find(".flex-active-slide").find(".fs-vid-background video").length&&e.find(".flex-active-slide").find(".fs-vid-background video").get(0).play())}}),$(".slider-paging-controls").flexslider({animation:"slide",directionNav:!1}),$(".slider-arrow-controls").flexslider({controlNav:!1}),$(".slider-thumb-controls .slides li").each(function(){var e=$(this).find("img").attr("src");$(this).attr("data-thumb",e)}),$(".slider-thumb-controls").flexslider({animation:"slide",controlNav:"thumbnails",directionNav:!0}),$(".logo-carousel").flexslider({minItems:1,maxItems:4,move:1,itemWidth:200,itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3e3,directionNav:!1,controlNav:!1})),$(".lightbox-grid li a").each(function(){var e=$(this).closest(".lightbox-grid").attr("data-gallery-title");$(this).attr("data-lightbox",e)}),$("iframe[data-provider]").each(function(){var e=jQuery(this).attr("data-provider"),t=jQuery(this).attr("data-video-id"),a=jQuery(this).attr("data-autoplay"),n="";"vimeo"==e?(n="http://player.vimeo.com/video/"+t+"?badge=0&title=0&byline=0&title=0&autoplay="+a,$(this).attr("data-src",n)):"youtube"==e?(n="https://www.youtube.com/embed/"+t+"?showinfo=0&autoplay="+a,$(this).attr("data-src",n)):console.log("Only Vimeo and Youtube videos are supported at this time")}),jQuery(".foundry_modal[modal-link]").remove(),$(".foundry_modal").length&&!jQuery(".modal-screen").length&&jQuery("<div />").addClass("modal-screen").appendTo("body"),jQuery(".foundry_modal").click(function(){jQuery(this).addClass("modal-acknowledged")}),jQuery(document).on("wheel mousewheel scroll",".foundry_modal, .modal-screen",function(e){return $(this).get(0).scrollTop+=e.originalEvent.deltaY,!1}),$(".modal-container:not([modal-link])").each(function(e){if(jQuery(this).find("iframe[src]").length){jQuery(this).find(".foundry_modal").addClass("iframe-modal");var t=jQuery(this).find("iframe");t.attr("data-src",t.attr("src")),t.attr("src","")}jQuery(this).find(".btn-modal").attr("modal-link",e),jQuery('.foundry_modal[modal-link="'+e+'"]').length||jQuery(this).find(".foundry_modal").clone().appendTo("body").attr("modal-link",e).prepend(jQuery('<i class="ti-close close-modal">'))}),$(".btn-modal").unbind("click").click(function(){var e=jQuery('.foundry_modal[modal-link="'+jQuery(this).attr("modal-link")+'"]'),t="";if(jQuery(".modal-screen").toggleClass("reveal-modal"),e.find("iframe").length){if("1"===e.find("iframe").attr("data-autoplay"))var t="&autoplay=1";e.find("iframe").attr("src",e.find("iframe").attr("data-src")+t)}return e.toggleClass("reveal-modal"),!1}),$(".foundry_modal[data-time-delay]").each(function(){var e=$(this),t=e.attr("data-time-delay");e.prepend($('<i class="ti-close close-modal">')),"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")},t):setTimeout(function(){e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")},t)}),$(".foundry_modal[data-show-on-exit]").each(function(){var e=$(this),t=$(e.attr("data-show-on-exit"));$(t).length&&(e.prepend($('<i class="ti-close close-modal">')),$(document).on("mouseleave",t,function(){$("body .reveal-modal").length||("undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||(e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")):(e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")))}))}),$(".foundry_modal[data-hide-after]").each(function(){var e=$(this),t=e.attr("data-hide-after");"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.hasClass("modal-acknowledged")||(e.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},t):setTimeout(function(){e.hasClass("modal-acknowledged")||(e.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},t)}),jQuery(".close-modal:not(.modal-strip .close-modal)").unbind("click").click(function(){var e=jQuery(this).closest(".foundry_modal");e.toggleClass("reveal-modal"),"undefined"!=typeof e.attr("data-cookie")&&mr_cookies.setItem(e.attr("data-cookie"),"true",1/0),e.find("iframe").length&&e.find("iframe").attr("src",""),jQuery(".modal-screen").removeClass("reveal-modal")}),jQuery(".modal-screen").unbind("click").click(function(){jQuery(".foundry_modal.reveal-modal").find("iframe").length&&jQuery(".foundry_modal.reveal-modal").find("iframe").attr("src",""),jQuery(".foundry_modal.reveal-modal").toggleClass("reveal-modal"),jQuery(this).toggleClass("reveal-modal")}),jQuery(document).keyup(function(e){27==e.keyCode&&(jQuery(".foundry_modal").find("iframe").length&&jQuery(".foundry_modal").find("iframe").attr("src",""),jQuery(".foundry_modal").removeClass("reveal-modal"),jQuery(".modal-screen").removeClass("reveal-modal"))}),jQuery(".modal-strip").each(function(){jQuery(this).find(".close-modal").length||jQuery(this).append(jQuery('<i class="ti-close close-modal">'));var e=jQuery(this);"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.addClass("reveal-modal")},1e3):setTimeout(function(){e.addClass("reveal-modal")},1e3)}),jQuery(".modal-strip .close-modal").click(function(){var e=jQuery(this).closest(".modal-strip");return"undefined"!=typeof e.attr("data-cookie")&&mr_cookies.setItem(e.attr("data-cookie"),"true",1/0),jQuery(this).closest(".modal-strip").removeClass("reveal-modal"),!1}),jQuery(".close-iframe").click(function(){jQuery(this).closest(".modal-video").removeClass("reveal-modal"),jQuery(this).siblings("iframe").attr("src",""),jQuery(this).siblings("video").get(0).pause()}),$(".checkbox-option").on("click",function(){$(this).toggleClass("checked");var e=$(this).find("input");e.prop("checked")===!1?e.prop("checked",!0):e.prop("checked",!1)}),$(".radio-option").click(function(){var e=$(this).hasClass("checked"),t=$(this).find("input").attr("name");e||($('input[name="'+t+'"]').parent().removeClass("checked"),$(this).addClass("checked"),$(this).find("input").prop("checked",!0))}),$(".accordion li").click(function(){$(this).closest(".accordion").hasClass("one-open")?($(this).closest(".accordion").find("li").removeClass("active"),$(this).addClass("active")):$(this).toggleClass("active"),"undefined"!=typeof window.mr_parallax&&setTimeout(mr_parallax.windowLoad,500)}),$(".tabbed-content").each(function(){$(this).append('<ul class="content"></ul>')}),$(".tabs li").each(function(){var e=$(this),t="";e.is(".tabs>li:first-child")&&(t=' class="active"');var a=e.find(".tab-content").detach().wrap("<li"+t+"></li>").parent();e.closest(".tabbed-content").find(".content").append(a)}),$(".tabs li").click(function(){$(this).closest(".tabs").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index()+1;$(this).closest(".tabbed-content").find(".content>li").removeClass("active"),$(this).closest(".tabbed-content").find(".content>li:nth-of-type("+e+")").addClass("active")}),$("section").closest("body").find(".local-video-container .play-button").click(function(){$(this).siblings(".background-image-holder").removeClass("fadeIn"),$(this).siblings(".background-image-holder").css("z-index",-1),$(this).css("opacity",0),$(this).siblings("video").get(0).play()}),$("section").closest("body").find(".player").each(function(){var e=$(this).closest("section");e.find(".container").addClass("fadeOut");var t=$(this).attr("data-video-id"),a=$(this).attr("data-start-at");$(this).attr("data-property","{videoURL:'http://youtu.be/"+t+"',containment:'self',autoPlay:true, mute:true, startAt:"+a+", opacity:1, showControls:false}")}),$(".player").length&&$(".player").each(function(){var e=$(this).closest("section"),t=e.find(".player");t.YTPlayer(),t.on("YTPStart",function(t){e.find(".container").removeClass("fadeOut"),e.find(".masonry-loader").addClass("fadeOut")})}),$(".map-holder").click(function(){$(this).addClass("interact")}),$(".map-holder").length&&$(window).scroll(function(){$(".map-holder.interact").length&&$(".map-holder.interact").removeClass("interact")}),$(".countdown").length&&$(".countdown").each(function(){var e=$(this).attr("data-date");$(this).countdown(e,function(e){$(this).text(e.strftime("%D days %H:%M:%S"))})}),$("form.form-email, form.form-newsletter").submit(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var a,n,i,o,r,s,l,d,c,u=$(this).closest("form.form-email, form.form-newsletter"),m=u.find('button[type="submit"]'),f=0,v=u.attr("original-error");if(n=$(u).find("iframe.mail-list-form"),u.find(".form-error, .form-success").remove(),m.attr("data-text",m.text()),u.append('<div class="form-error" style="display: none;">'+u.attr("data-error")+"</div>"),u.append('<div class="form-success" style="display: none;">'+u.attr("data-success")+"</div>"),d=u.find(".form-error"),c=u.find(".form-success"),u.addClass("attempted-submit"),n.length&&"undefined"!=typeof n.attr("srcdoc")&&""!==n.attr("srcdoc"))if(console.log("Mail list form signup detected."),"undefined"!=typeof v&&v!==!1&&d.html(v),i=$(u).find(".signup-email-field").val(),o=$(u).find(".signup-name-field").val(),r=$(u).find("input.signup-first-name-field").length?$(u).find("input.signup-first-name-field").val():$(u).find(".signup-name-field").val(),s=$(u).find(".signup-last-name-field").val(),1!==e(u)){a=prepareSignup(n),a.find("#mce-EMAIL, #fieldEmail").val(i),a.find("#mce-LNAME, #fieldLastName").val(s),a.find("#mce-FNAME, #fieldFirstName").val(r),a.find("#mce-NAME, #fieldName").val(o),u.removeClass("attempted-submit"),d.fadeOut(200),m.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled");try{$.ajax({url:a.attr("action"),crossDomain:!0,data:a.serialize(),method:"GET",cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){"success"!=e.result&&200!=e.Status?(d.attr("original-error",d.text()),d.html(e.msg).fadeIn(1e3),c.fadeOut(1e3),m.html(m.attr("data-text")).removeAttr("disabled")):(m.html(m.attr("data-text")).removeAttr("disabled"),l=u.attr("success-redirect"),"undefined"!=typeof l&&l!==!1&&""!==l&&(window.location=l),u.find('input[type="text"]').val(""),u.find("textarea").val(""),c.fadeIn(1e3),d.fadeOut(1e3),setTimeout(function(){c.fadeOut(500)},5e3))}})}catch(p){d.attr("original-error",d.text()),d.html(p.message).fadeIn(1e3),c.fadeOut(1e3),setTimeout(function(){d.fadeOut(500)},5e3),m.html(m.attr("data-text")).removeAttr("disabled")}}else d.fadeIn(1e3),setTimeout(function(){d.fadeOut(500)},5e3);else console.log("Send email form detected."),"undefined"!=typeof v&&v!==!1&&d.text(v),f=e(u),1===f?(d.fadeIn(200),setTimeout(function(){d.fadeOut(2000)},10000)):(u.removeClass("attempted-submit"),d.fadeOut(200),m.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"mail/mail.php",data:u.serialize()+"&url="+window.location.href,success:function(e){m.html(m.attr("data-text")).removeAttr("disabled"),$.isNumeric(e)?parseInt(e)>0&&(l=u.attr("success-redirect"),"undefined"!=typeof l&&l!==!1&&""!==l&&(window.location=l),u.find('input[type="text"]').val(""),u.find("textarea").val(""),u.find(".form-success").fadeIn(1e3),d.fadeOut(1e3),setTimeout(function(){c.fadeOut(500)},5e3)):(d.attr("original-error",d.text()),d.text(e).fadeIn(1e3),c.fadeOut(1e3))},error:function(e,t,a){d.attr("original-error",d.text()),d.text(a).fadeIn(1e3),c.fadeOut(1e3),m.html(m.attr("data-text")).removeAttr("disabled")}}));return!1}),$(".validate-required, .validate-email").on("blur change",function(){e($(this).closest("form"))}),$("form").each(function(){$(this).find(".form-error").length&&$(this).attr("original-error",$(this).find(".form-error").text())}),t("ref")&&$("form.form-email").append('<input type="text" name="referrer" class="hidden" value="'+t("ref")+'"/>'),/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)&&$("section").removeClass("parallax"),$(".disqus-comments").length){var a=$(".disqus-comments").attr("data-shortname");!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+a+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()}if(document.querySelector("[data-maps-api-key]")&&!document.querySelector(".gMapsAPI")&&$("[data-maps-api-key]").length){var n=document.createElement("script"),i=$("[data-maps-api-key]:first").attr("data-maps-api-key");n.type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?key="+i+"&callback=initializeMaps",n.className="gMapsAPI",document.body.appendChild(n)}}),$(window).load(function(){"use strict";setTimeout(initializeMasonry,1e3);var e=setInterval(function(){return $(".tweets-slider").find("li.flex-active-slide").length?void clearInterval(e):void($(".tweets-slider").length&&$(".tweets-slider").flexslider({directionNav:!1,controlNav:!1}))},500);mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0)}),window.initializeMaps=function(){"undefined"!=typeof google&&"undefined"!=typeof google.maps&&$(".map-canvas[data-maps-api-key]").each(function(){var e,t,a,n=this,i="undefined"!=typeof $(this).attr("data-map-style")?$(this).attr("data-map-style"):!1,o=JSON.parse(i)||[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],r="undefined"!=typeof $(this).attr("data-map-zoom")&&""!==$(this).attr("data-map-zoom")?1*$(this).attr("data-map-zoom"):17,s="undefined"!=typeof $(this).attr("data-latlong")?$(this).attr("data-latlong"):!1,l=s?1*s.substr(0,s.indexOf(",")):!1,d=s?1*s.substr(s.indexOf(",")+1):!1,c=new google.maps.Geocoder,u="undefined"!=typeof $(this).attr("data-address")?$(this).attr("data-address").split(";"):[""],m="We Are Here",f=$(document).width()>766?!0:!1,v={draggable:f,scrollwheel:!1,zoom:r,disableDefaultUI:!0,styles:o};void 0!=$(this).attr("data-marker-title")&&""!=$(this).attr("data-marker-title")&&(m=$(this).attr("data-marker-title")),void 0!=u&&""!=u[0]?c.geocode({address:u[0].replace("[nomarker]","")},function(e,t){if(t==google.maps.GeocoderStatus.OK){var i=new google.maps.Map(n,v);i.setCenter(e[0].geometry.location),u.forEach(function(e){var t;if(a={url:void 0==window.mr_variant?"img/mapmarker.png":"../img/mapmarker.png",size:new google.maps.Size(50,50),scaledSize:new google.maps.Size(50,50)},/(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)/.test(e))var n=e.split(","),o=new google.maps.Marker({position:{lat:1*n[0],lng:1*n[1]},map:i,icon:a,title:m,optimised:!1});else e.indexOf("[nomarker]")<0&&(t=new google.maps.Geocoder,t.geocode({address:e.replace("[nomarker]","")},function(e,t){t==google.maps.GeocoderStatus.OK&&(o=new google.maps.Marker({map:i,icon:a,title:m,position:e[0].geometry.location,optimised:!1}))}))})}else console.log("There was a problem geocoding the address.")}):void 0!=l&&""!=l&&0!=l&&void 0!=d&&""!=d&&0!=d&&(v.center={lat:l,lng:d},e=new google.maps.Map(n,v),t=new google.maps.Marker({position:{lat:l,lng:d},map:e,icon:a,title:m}))})},initializeMaps();var mr_cookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,a,n,i,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(a)switch(a.constructor){case Number:r=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:r="; expires="+a;break;case Date:r="; expires="+a.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+(i?"; domain="+i:"")+(n?"; path="+n:"")+(o?"; secure":""),!0},removeItem:function(e,t,a){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,a=0;t>a;a++)e[a]=decodeURIComponent(e[a]);return e}};window.mr_parallax=new mr_parallax,function(e,t){function a(t,a,r,s){t[n](o+a,"wheel"==i?r:function(t){!t&&(t=e.event);var a={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,notRealWheel:1,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==i?(a.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(a.deltaX=-1/40*t.wheelDeltaX)):a.deltaY=t.detail/3,r(a)},s||!1)}var n,i,o="";e.addEventListener?n="addEventListener":(n="attachEvent",o="on"),i="onwheel"in t.createElement("div")?"wheel":"undefined"!=typeof t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,n){a(e,i,t,n),"DOMMouseScroll"==i&&a(e,"MozMousePixelScroll",t,n)}}(window,document),!function(e){function t(e){return e.replace(/(:|\.)/g,"\\$1")}var a="1.4.10",n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},i=function(t){var a=[],n=!1,i=t.dir&&"left"==t.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var t=e(this);t[i]()>0?a.push(this):(t[i](1),
n=t[i]()>0,n&&a.push(this),t[i](0))}}),a.length||this.each(function(){"BODY"===this.nodeName&&(a=[this])}),"first"===t.el&&a.length>1&&(a=[a[0]]),a};e.fn.extend({scrollable:function(e){var t=i.call(this,{dir:e});return this.pushStack(t)},firstScrollable:function(e){var t=i.call(this,{el:"first",dir:e});return this.pushStack(t)},smoothScroll:function(a){a=a||{};var n=e.extend({},e.fn.smoothScroll.defaults,a),i=e.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(a){var o=this,r=e(this),s=n.exclude,l=n.excludeWithin,d=0,c=0,u=!0,m={},f=location.hostname===o.hostname||!o.hostname,v=n.scrollTarget||(e.smoothScroll.filterPath(o.pathname)||i)===i,p=t(o.hash);if(n.scrollTarget||f&&v&&p){for(;u&&s.length>d;)r.is(t(s[d++]))&&(u=!1);for(;u&&l.length>c;)r.closest(l[c++]).length&&(u=!1)}else u=!1;u&&(a.preventDefault(),e.extend(m,n,{scrollTarget:n.scrollTarget||p,link:o}),e.smoothScroll(m))}),this}}),e.smoothScroll=function(t,a){var n,i,o,r,s=0,l="offset",d="scrollTop",c={},u={};"number"==typeof t?(n=e.fn.smoothScroll.defaults,o=t):(n=e.extend({},e.fn.smoothScroll.defaults,t||{}),n.scrollElement&&(l="position","static"==n.scrollElement.css("position")&&n.scrollElement.css("position","relative"))),n=e.extend({link:null},n),d="left"==n.direction?"scrollLeft":d,n.scrollElement?(i=n.scrollElement,s=i[d]()):i=e("html, body").firstScrollable(),n.beforeScroll.call(i,n),o="number"==typeof t?t:a||e(n.scrollTarget)[l]()&&e(n.scrollTarget)[l]()[n.direction]||0,c[d]=o+s+n.offset,r=n.speed,"auto"===r&&(r=c[d]||i.scrollTop(),r/=n.autoCoefficent),u={duration:r,easing:n.easing,complete:function(){n.afterScroll.call(n.link,n)}},n.step&&(u.step=n.step),i.length?i.stop().animate(c,u):n.afterScroll.call(n.link,n)},e.smoothScroll.version=a,e.smoothScroll.filterPath=function(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},e.fn.smoothScroll.defaults=n}(jQuery),$.fn.isOnScreen=function(){var e=$(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width(),t.bottom=t.top+e.height();var a=this.offset();return a.right=a.left+this.outerWidth(),a.bottom=a.top+this.outerHeight(),!(t.right<a.left||t.left>a.right||t.bottom<a.top||t.top>a.bottom)};var CountUp=function(e,t,a,n,i,o){for(var r=0,s=["webkit","moz","ms","o"],l=0;l<s.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[s[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[l]+"CancelAnimationFrame"]||window[s[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var a=(new Date).getTime(),n=Math.max(0,16-(a-r)),i=window.setTimeout(function(){e(a+n)},n);return r=a+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var d=this;d.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null};for(var c in o)o.hasOwnProperty(c)&&(d.options[c]=o[c]);""===d.options.separator&&(d.options.useGrouping=!1),d.options.prefix||(d.options.prefix=""),d.options.suffix||(d.options.suffix=""),d.d="string"==typeof e?document.getElementById(e):e,d.startVal=Number(t),d.endVal=Number(a),d.countDown=d.startVal>d.endVal,d.frameVal=d.startVal,d.decimals=Math.max(0,n||0),d.dec=Math.pow(10,d.decimals),d.duration=1e3*Number(i)||2e3,d.formatNumber=function(e){e=e.toFixed(d.decimals),e+="";var t,a,n,i;if(t=e.split("."),a=t[0],n=t.length>1?d.options.decimal+t[1]:"",i=/(\d+)(\d{3})/,d.options.useGrouping)for(;i.test(a);)a=a.replace(i,"$1"+d.options.separator+"$2");return d.options.prefix+a+n+d.options.suffix},d.easeOutExpo=function(e,t,a,n){return a*(-Math.pow(2,-10*e/n)+1)*1024/1023+t},d.easingFn=d.options.easingFn?d.options.easingFn:d.easeOutExpo,d.formattingFn=d.options.formattingFn?d.options.formattingFn:d.formatNumber,d.version=function(){return"1.7.1"},d.printValue=function(e){var t=d.formattingFn(e);"INPUT"===d.d.tagName?this.d.value=t:"text"===d.d.tagName||"tspan"===d.d.tagName?this.d.textContent=t:this.d.innerHTML=t},d.count=function(e){d.startTime||(d.startTime=e),d.timestamp=e;var t=e-d.startTime;d.remaining=d.duration-t,d.options.useEasing?d.countDown?d.frameVal=d.startVal-d.easingFn(t,0,d.startVal-d.endVal,d.duration):d.frameVal=d.easingFn(t,d.startVal,d.endVal-d.startVal,d.duration):d.countDown?d.frameVal=d.startVal-(d.startVal-d.endVal)*(t/d.duration):d.frameVal=d.startVal+(d.endVal-d.startVal)*(t/d.duration),d.countDown?d.frameVal=d.frameVal<d.endVal?d.endVal:d.frameVal:d.frameVal=d.frameVal>d.endVal?d.endVal:d.frameVal,d.frameVal=Math.round(d.frameVal*d.dec)/d.dec,d.printValue(d.frameVal),t<d.duration?d.rAF=requestAnimationFrame(d.count):d.callback&&d.callback()},d.start=function(e){return d.callback=e,d.rAF=requestAnimationFrame(d.count),!1},d.pauseResume=function(){d.paused?(d.paused=!1,delete d.startTime,d.duration=d.remaining,d.startVal=d.frameVal,requestAnimationFrame(d.count)):(d.paused=!0,cancelAnimationFrame(d.rAF))},d.reset=function(){d.paused=!1,delete d.startTime,d.startVal=t,cancelAnimationFrame(d.rAF),d.printValue(d.startVal)},d.update=function(e){cancelAnimationFrame(d.rAF),d.paused=!1,delete d.startTime,d.startVal=d.frameVal,d.endVal=Number(e),d.countDown=d.startVal>d.endVal,d.rAF=requestAnimationFrame(d.count)},d.printValue(d.startVal)};!function(e){e.flexslider=function(t,a){var n=e(t);n.vars=e.extend({},e.flexslider.defaults,a);var d,i=n.vars.namespace,o=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,r=("ontouchstart"in window||o||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,s="click touchend MSPointerUp keyup",l="",c="vertical"===n.vars.direction,u=n.vars.reverse,m=n.vars.itemWidth>0,f="fade"===n.vars.animation,v=""!==n.vars.asNavFor,p={},h=!0;e.data(t,"flexslider",n),p={init:function(){n.animating=!1,n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10),isNaN(n.currentSlide)&&(n.currentSlide=0),n.animatingTo=n.currentSlide,n.atEnd=0===n.currentSlide||n.currentSlide===n.last,n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" ")),n.slides=e(n.vars.selector,n),n.container=e(n.containerSelector,n),n.count=n.slides.length,n.syncExists=e(n.vars.sync).length>0,"slide"===n.vars.animation&&(n.vars.animation="swing"),n.prop=c?"top":"marginLeft",n.args={},n.manualPause=!1,n.stopped=!1,n.started=!1,n.startTimeout=null,n.transitions=!n.vars.video&&!f&&n.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var a in t)if(void 0!==e.style[t[a]])return n.pfx=t[a].replace("Perspective","").toLowerCase(),n.prop="-"+n.pfx+"-transform",!0;return!1}(),n.ensureAnimationEnd="",""!==n.vars.controlsContainer&&(n.controlsContainer=e(n.vars.controlsContainer).length>0&&e(n.vars.controlsContainer)),""!==n.vars.manualControls&&(n.manualControls=e(n.vars.manualControls).length>0&&e(n.vars.manualControls)),n.vars.randomize&&(n.slides.sort(function(){return Math.round(Math.random())-.5}),n.container.empty().append(n.slides)),n.doMath(),n.setup("init"),n.vars.controlNav&&p.controlNav.setup(),n.vars.directionNav&&p.directionNav.setup(),n.vars.keyboard&&(1===e(n.containerSelector).length||n.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!n.animating&&(39===t||37===t)){var a=39===t?n.getTarget("next"):37===t?n.getTarget("prev"):!1;n.flexAnimate(a,n.vars.pauseOnAction)}}),n.vars.mousewheel&&n.bind("mousewheel",function(e,t,a,i){e.preventDefault();var o=n.getTarget(0>t?"next":"prev");n.flexAnimate(o,n.vars.pauseOnAction)}),n.vars.pausePlay&&p.pausePlay.setup(),n.vars.slideshow&&n.vars.pauseInvisible&&p.pauseInvisible.init(),n.vars.slideshow&&(n.vars.pauseOnHover&&n.hover(function(){n.manualPlay||n.manualPause||n.pause()},function(){n.manualPause||n.manualPlay||n.stopped||n.play()}),n.vars.pauseInvisible&&p.pauseInvisible.isHidden()||(n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play())),v&&p.asNav.setup(),r&&n.vars.touch&&p.touch(),(!f||f&&n.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",p.resize),n.find("img").attr("draggable","false"),setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=!0,n.animatingTo=Math.floor(n.currentSlide/n.move),n.currentItem=n.currentSlide,n.slides.removeClass(i+"active-slide").eq(n.currentItem).addClass(i+"active-slide"),o?(t._slider=n,n.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var a=e(this),i=a.index();e(n.vars.asNavFor).data("flexslider").animating||a.hasClass("active")||(n.direction=n.currentItem<i?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction,!1,!0,!0))})})):n.slides.on(s,function(t){t.preventDefault();var a=e(this),o=a.index(),r=a.offset().left-e(n).scrollLeft();0>=r&&a.hasClass(i+"active-slide")?n.flexAnimate(n.getTarget("prev"),!0):e(n.vars.asNavFor).data("flexslider").animating||a.hasClass(i+"active-slide")||(n.direction=n.currentItem<o?"next":"prev",n.flexAnimate(o,n.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){n.manualControls?p.controlNav.setupManual():p.controlNav.setupPaging()},setupPaging:function(){var o,r,t="thumbnails"===n.vars.controlNav?"control-thumbs":"control-paging",a=1;if(n.controlNavScaffold=e('<ol class="'+i+"control-nav "+i+t+'"></ol>'),n.pagingCount>1)for(var d=0;d<n.pagingCount;d++){if(r=n.slides.eq(d),o="thumbnails"===n.vars.controlNav?'<img src="'+r.attr("data-thumb")+'"/>':"<a>"+a+"</a>","thumbnails"===n.vars.controlNav&&!0===n.vars.thumbCaptions){var c=r.attr("data-thumbcaption");""!=c&&void 0!=c&&(o+='<span class="'+i+'caption">'+c+"</span>")}n.controlNavScaffold.append("<li>"+o+"</li>"),a++}n.controlsContainer?e(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold),p.controlNav.set(),p.controlNav.active(),n.controlNavScaffold.delegate("a, img",s,function(t){if(t.preventDefault(),""===l||l===t.type){var a=e(this),o=n.controlNav.index(a);a.hasClass(i+"active")||(n.direction=o>n.currentSlide?"next":"prev",n.flexAnimate(o,n.vars.pauseOnAction))}""===l&&(l=t.type),p.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls,p.controlNav.active(),n.controlNav.bind(s,function(t){if(t.preventDefault(),""===l||l===t.type){var a=e(this),o=n.controlNav.index(a);a.hasClass(i+"active")||(n.direction=o>n.currentSlide?"next":"prev",n.flexAnimate(o,n.vars.pauseOnAction))}""===l&&(l=t.type),p.setToClearWatchedEvent()})},set:function(){var t="thumbnails"===n.vars.controlNav?"img":"a";n.controlNav=e("."+i+"control-nav li "+t,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(i+"active").eq(n.animatingTo).addClass(i+"active")},update:function(t,a){n.pagingCount>1&&"add"===t?n.controlNavScaffold.append(e("<li><a>"+n.count+"</a></li>")):1===n.pagingCount?n.controlNavScaffold.find("li").remove():n.controlNav.eq(a).closest("li").remove(),p.controlNav.set(),n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(a,t):p.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+i+'direction-nav"><li><a class="'+i+'prev" href="#">'+n.vars.prevText+'</a></li><li><a class="'+i+'next" href="#">'+n.vars.nextText+"</a></li></ul>");n.controlsContainer?(e(n.controlsContainer).append(t),n.directionNav=e("."+i+"direction-nav li a",n.controlsContainer)):(n.append(t),n.directionNav=e("."+i+"direction-nav li a",n)),p.directionNav.update(),n.directionNav.bind(s,function(t){t.preventDefault();var a;(""===l||l===t.type)&&(a=n.getTarget(e(this).hasClass(i+"next")?"next":"prev"),n.flexAnimate(a,n.vars.pauseOnAction)),""===l&&(l=t.type),p.setToClearWatchedEvent()})},update:function(){var e=i+"disabled";1===n.pagingCount?n.directionNav.addClass(e).attr("tabindex","-1"):n.vars.animationLoop?n.directionNav.removeClass(e).removeAttr("tabindex"):0===n.animatingTo?n.directionNav.removeClass(e).filter("."+i+"prev").addClass(e).attr("tabindex","-1"):n.animatingTo===n.last?n.directionNav.removeClass(e).filter("."+i+"next").addClass(e).attr("tabindex","-1"):n.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+i+'pauseplay"><a></a></div>');n.controlsContainer?(n.controlsContainer.append(t),n.pausePlay=e("."+i+"pauseplay a",n.controlsContainer)):(n.append(t),n.pausePlay=e("."+i+"pauseplay a",n)),p.pausePlay.update(n.vars.slideshow?i+"pause":i+"play"),n.pausePlay.bind(s,function(t){t.preventDefault(),(""===l||l===t.type)&&(e(this).hasClass(i+"pause")?(n.manualPause=!0,n.manualPlay=!1,n.pause()):(n.manualPause=!1,n.manualPlay=!0,n.play())),""===l&&(l=t.type),p.setToClearWatchedEvent()})},update:function(e){"play"===e?n.pausePlay.removeClass(i+"pause").addClass(i+"play").html(n.vars.playText):n.pausePlay.removeClass(i+"play").addClass(i+"pause").html(n.vars.pauseText)}},touch:function(){function e(e){n.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(n.pause(),h=c?n.h:n.w,y=Number(new Date),$=e.touches[0].pageX,b=e.touches[0].pageY,p=m&&u&&n.animatingTo===n.last?0:m&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:m&&n.currentSlide===n.last?n.limit:m?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*h:(n.currentSlide+n.cloneOffset)*h,d=c?b:$,v=c?$:b,t.addEventListener("touchmove",a,!1),t.addEventListener("touchend",i,!1))}function a(e){$=e.touches[0].pageX,b=e.touches[0].pageY,g=c?d-b:d-$,w=c?Math.abs(g)<Math.abs($-v):Math.abs(g)<Math.abs(b-v);var t=500;(!w||Number(new Date)-y>t)&&(e.preventDefault(),!f&&n.transitions&&(n.vars.animationLoop||(g/=0===n.currentSlide&&0>g||n.currentSlide===n.last&&g>0?Math.abs(g)/h+2:1),n.setProps(p+g,"setTouch")))}function i(e){if(t.removeEventListener("touchmove",a,!1),n.animatingTo===n.currentSlide&&!w&&null!==g){var o=u?-g:g,r=n.getTarget(o>0?"next":"prev");n.canAdvance(r)&&(Number(new Date)-y<550&&Math.abs(o)>50||Math.abs(o)>h/2)?n.flexAnimate(r,n.vars.pauseOnAction):f||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}t.removeEventListener("touchend",i,!1),d=null,v=null,g=null,p=null}function r(e){e.stopPropagation(),n.animating?e.preventDefault():(n.pause(),t._gesture.addPointer(e.pointerId),x=0,h=c?n.h:n.w,y=Number(new Date),p=m&&u&&n.animatingTo===n.last?0:m&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:m&&n.currentSlide===n.last?n.limit:m?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*h:(n.currentSlide+n.cloneOffset)*h)}function s(e){e.stopPropagation();var a=e.target._slider;if(a){var n=-e.translationX,i=-e.translationY;return x+=c?i:n,g=x,w=c?Math.abs(x)<Math.abs(-n):Math.abs(x)<Math.abs(-i),e.detail===e.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){t._gesture.stop()}):void((!w||Number(new Date)-y>500)&&(e.preventDefault(),!f&&a.transitions&&(a.vars.animationLoop||(g=x/(0===a.currentSlide&&0>x||a.currentSlide===a.last&&x>0?Math.abs(x)/h+2:1)),a.setProps(p+g,"setTouch"))))}}function l(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!w&&null!==g){var a=u?-g:g,n=t.getTarget(a>0?"next":"prev");t.canAdvance(n)&&(Number(new Date)-y<550&&Math.abs(a)>50||Math.abs(a)>h/2)?t.flexAnimate(n,t.vars.pauseOnAction):f||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}d=null,v=null,g=null,p=null,x=0}}var d,v,p,h,g,y,w=!1,$=0,b=0,x=0;o?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",r,!1),t._slider=n,t.addEventListener("MSGestureChange",s,!1),t.addEventListener("MSGestureEnd",l,!1)):t.addEventListener("touchstart",e,!1)},resize:function(){!n.animating&&n.is(":visible")&&(m||n.doMath(),f?p.smoothHeight():m?(n.slides.width(n.computedW),n.update(n.pagingCount),n.setProps()):c?(n.viewport.height(n.h),n.setProps(n.h,"setTotal")):(n.vars.smoothHeight&&p.smoothHeight(),n.newSlides.width(n.computedW),n.setProps(n.computedW,"setTotal")))},smoothHeight:function(e){if(!c||f){var t=f?n:n.viewport;e?t.animate({height:n.slides.eq(n.animatingTo).height()},e):t.height(n.slides.eq(n.animatingTo).height())}},sync:function(t){var a=e(n.vars.sync).data("flexslider"),i=n.animatingTo;switch(t){case"animate":a.flexAnimate(i,n.vars.pauseOnAction,!1,!0);break;case"play":a.playing||a.asNav||a.play();break;case"pause":a.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=e(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var e=p.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){p.pauseInvisible.isHidden()?n.startTimeout?clearTimeout(n.startTimeout):n.pause():n.started?n.play():n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()})}},isHidden:function(){var e=p.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(d),d=setTimeout(function(){l=""},3e3)}},n.flexAnimate=function(t,a,o,s,l){if(n.vars.animationLoop||t===n.currentSlide||(n.direction=t>n.currentSlide?"next":"prev"),v&&1===n.pagingCount&&(n.direction=n.currentItem<t?"next":"prev"),!n.animating&&(n.canAdvance(t,l)||o)&&n.is(":visible")){if(v&&s){var d=e(n.vars.asNavFor).data("flexslider");if(n.atEnd=0===t||t===n.count-1,d.flexAnimate(t,!0,!1,!0,l),n.direction=n.currentItem<t?"next":"prev",d.direction=n.direction,Math.ceil((t+1)/n.visible)-1===n.currentSlide||0===t)return n.currentItem=t,n.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide"),!1;n.currentItem=t,n.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide"),t=Math.floor(t/n.visible)}if(n.animating=!0,n.animatingTo=t,a&&n.pause(),n.vars.before(n),n.syncExists&&!l&&p.sync("animate"),n.vars.controlNav&&p.controlNav.active(),m||n.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide"),n.atEnd=0===t||t===n.last,n.vars.directionNav&&p.directionNav.update(),t===n.last&&(n.vars.end(n),n.vars.animationLoop||n.pause()),f)r?(n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1}),n.slides.eq(t).css({opacity:1,zIndex:2}),n.wrapup(h)):(n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing),n.slides.eq(t).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup));else{var g,y,w,h=c?n.slides.filter(":first").height():n.computedW;m?(g=n.vars.itemMargin,w=(n.itemW+g)*n.move*n.animatingTo,y=w>n.limit&&1!==n.visible?n.limit:w):y=0===n.currentSlide&&t===n.count-1&&n.vars.animationLoop&&"next"!==n.direction?u?(n.count+n.cloneOffset)*h:0:n.currentSlide===n.last&&0===t&&n.vars.animationLoop&&"prev"!==n.direction?u?0:(n.count+1)*h:u?(n.count-1-t+n.cloneOffset)*h:(t+n.cloneOffset)*h,n.setProps(y,"",n.vars.animationSpeed),n.transitions?(n.vars.animationLoop&&n.atEnd||(n.animating=!1,n.currentSlide=n.animatingTo),n.container.unbind("webkitTransitionEnd transitionend"),n.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(n.ensureAnimationEnd),n.wrapup(h)}),clearTimeout(n.ensureAnimationEnd),n.ensureAnimationEnd=setTimeout(function(){n.wrapup(h)},n.vars.animationSpeed+100)):n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(h)})}n.vars.smoothHeight&&p.smoothHeight(n.vars.animationSpeed)}},n.wrapup=function(e){f||m||(0===n.currentSlide&&n.animatingTo===n.last&&n.vars.animationLoop?n.setProps(e,"jumpEnd"):n.currentSlide===n.last&&0===n.animatingTo&&n.vars.animationLoop&&n.setProps(e,"jumpStart")),n.animating=!1,n.currentSlide=n.animatingTo,n.vars.after(n)},n.animateSlides=function(){!n.animating&&h&&n.flexAnimate(n.getTarget("next"))},n.pause=function(){clearInterval(n.animatedSlides),n.animatedSlides=null,n.playing=!1,n.vars.pausePlay&&p.pausePlay.update("play"),n.syncExists&&p.sync("pause")},n.play=function(){n.playing&&clearInterval(n.animatedSlides),n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed),n.started=n.playing=!0,n.vars.pausePlay&&p.pausePlay.update("pause"),n.syncExists&&p.sync("play")},n.stop=function(){n.pause(),n.stopped=!0},n.canAdvance=function(e,t){var a=v?n.pagingCount-1:n.last;return t?!0:v&&n.currentItem===n.count-1&&0===e&&"prev"===n.direction?!0:v&&0===n.currentItem&&e===n.pagingCount-1&&"next"!==n.direction?!1:e!==n.currentSlide||v?n.vars.animationLoop?!0:n.atEnd&&0===n.currentSlide&&e===a&&"next"!==n.direction?!1:n.atEnd&&n.currentSlide===a&&0===e&&"next"===n.direction?!1:!0:!1},n.getTarget=function(e){return n.direction=e,"next"===e?n.currentSlide===n.last?0:n.currentSlide+1:0===n.currentSlide?n.last:n.currentSlide-1},n.setProps=function(e,t,a){var i=function(){var a=e?e:(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo,i=function(){if(m)return"setTouch"===t?e:u&&n.animatingTo===n.last?0:u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:a;switch(t){case"setTotal":return u?(n.count-1-n.currentSlide+n.cloneOffset)*e:(n.currentSlide+n.cloneOffset)*e;case"setTouch":return u?e:e;case"jumpEnd":return u?e:n.count*e;case"jumpStart":return u?n.count*e:e;default:return e}}();return-1*i+"px"}();n.transitions&&(i=c?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",a=void 0!==a?a/1e3+"s":"0s",n.container.css("-"+n.pfx+"-transition-duration",a),n.container.css("transition-duration",a)),n.args[n.prop]=i,(n.transitions||void 0===a)&&n.container.css(n.args),n.container.css("transform",i)},n.setup=function(t){if(f)n.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===t&&(r?n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2}):0==n.vars.fadeFirstSlide?n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).css({opacity:1}):n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)),n.vars.smoothHeight&&p.smoothHeight();else{var a,o;"init"===t&&(n.viewport=e('<div class="'+i+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container),n.cloneCount=0,n.cloneOffset=0,u&&(o=e.makeArray(n.slides).reverse(),n.slides=e(o),n.container.empty().append(n.slides))),n.vars.animationLoop&&!m&&(n.cloneCount=2,n.cloneOffset=1,"init"!==t&&n.container.find(".clone").remove(),n.container.append(p.uniqueID(n.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(p.uniqueID(n.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),n.newSlides=e(n.vars.selector,n),a=u?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset,c&&!m?(n.container.height(200*(n.count+n.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){n.newSlides.css({display:"block"}),n.doMath(),n.viewport.height(n.h),n.setProps(a*n.h,"init")},"init"===t?100:0)):(n.container.width(200*(n.count+n.cloneCount)+"%"),n.setProps(a*n.computedW,"init"),setTimeout(function(){n.doMath(),n.newSlides.css({width:n.computedW,"float":"left",display:"block"}),n.vars.smoothHeight&&p.smoothHeight()},"init"===t?100:0))}m||n.slides.removeClass(i+"active-slide").eq(n.currentSlide).addClass(i+"active-slide"),n.vars.init(n)},n.doMath=function(){var e=n.slides.first(),t=n.vars.itemMargin,a=n.vars.minItems,i=n.vars.maxItems;n.w=void 0===n.viewport?n.width():n.viewport.width(),n.h=e.height(),n.boxPadding=e.outerWidth()-e.width(),m?(n.itemT=n.vars.itemWidth+t,n.minW=a?a*n.itemT:n.w,n.maxW=i?i*n.itemT-t:n.w,n.itemW=n.minW>n.w?(n.w-t*(a-1))/a:n.maxW<n.w?(n.w-t*(i-1))/i:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth,n.visible=Math.floor(n.w/n.itemW),n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible,n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1),n.last=n.pagingCount-1,n.limit=1===n.pagingCount?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+t*(n.count-1):(n.itemW+t)*n.count-n.w-t):(n.itemW=n.w,n.pagingCount=n.count,n.last=n.count-1),n.computedW=n.itemW-n.boxPadding},n.update=function(e,t){n.doMath(),m||(e<n.currentSlide?n.currentSlide+=1:e<=n.currentSlide&&0!==e&&(n.currentSlide-=1),n.animatingTo=n.currentSlide),n.vars.controlNav&&!n.manualControls&&("add"===t&&!m||n.pagingCount>n.controlNav.length?p.controlNav.update("add"):("remove"===t&&!m||n.pagingCount<n.controlNav.length)&&(m&&n.currentSlide>n.last&&(n.currentSlide-=1,n.animatingTo-=1),p.controlNav.update("remove",n.last))),n.vars.directionNav&&p.directionNav.update()},n.addSlide=function(t,a){var i=e(t);n.count+=1,n.last=n.count-1,c&&u?void 0!==a?n.slides.eq(n.count-a).after(i):n.container.prepend(i):void 0!==a?n.slides.eq(a).before(i):n.container.append(i),n.update(a,"add"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.added(n)},n.removeSlide=function(t){var a=isNaN(t)?n.slides.index(e(t)):t;n.count-=1,n.last=n.count-1,isNaN(t)?e(t,n.slides).remove():c&&u?n.slides.eq(n.last).remove():n.slides.eq(t).remove(),n.doMath(),n.update(a,"remove"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.removed(n)},p.init()},e(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},e.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"==typeof t)return this.each(function(){var a=e(this),n=t.selector?t.selector:".slides > li",i=a.find(n);1===i.length&&t.allowOneSlide===!0||0===i.length?(i.fadeIn(400),t.start&&t.start(a)):void 0===a.data("flexslider")&&new e.flexslider(this,t)});var a=e(this).data("flexslider");switch(t){case"play":a.play();break;case"pause":a.pause();break;case"stop":a.stop();break;case"next":a.flexAnimate(a.getTarget("next"),!0);break;case"prev":case"previous":a.flexAnimate(a.getTarget("prev"),!0);break;default:"number"==typeof t&&a.flexAnimate(t,!0)}}}(jQuery);